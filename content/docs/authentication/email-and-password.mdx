---
title: Email & Password Authentication
description: Complete email and password setup with verification
---

```go
package main

import (
	"context"
	"os"
	"log"
	"net/http"

	gobetterauth "github.com/GoBetterAuth/go-better-auth"
	gobetterauthdomain "github.com/GoBetterAuth/go-better-auth/domain"
	"github.com/GoBetterAuth/go-better-auth/domain/user"
)

func main() {
	auth, err := gobetterauth.New(&gobetterauthdomain.Config{
		BaseURL: "http://localhost:8080",
		Database: gobetterauthdomain.DatabaseConfig{
			Provider:         "postgres",
			ConnectionString: os.Getenv("DATABASE_URL"),
		},
		EmailAndPassword: &gobetterauthdomain.EmailPasswordConfig{
			Enabled:                  true,
			RequireEmailVerification: true,
			AutoSignIn:               true,
			SendResetPassword: func(ctx context.Context, user *user.User, url string, token string) error {
				log.Printf("Password reset for %s: %s", user.Email, url)
				// Send email using your email service
				return nil
			},
		},
		EmailVerification: &gobetterauthdomain.EmailVerificationConfig{
			Enabled:                     true,
			SendOnSignUp:                true,
			AutoSignInAfterVerification: true,
			SendVerificationEmail: func(ctx context.Context, user *user.User, url string, token string) error {
				log.Printf("Verification email for %s: %s", user.Email, url)
				// Send email using your email service
				return nil
			},
		},
	})

	if err != nil {
		log.Fatal(err)
	}

	http.Handle("/api/auth/", auth.Handler())
	log.Fatal(http.ListenAndServe(":8080", nil))
}
```

## Email Service Integration

### SendGrid Integration

```go
import "github.com/sendgrid/sendgrid-go"

func sendEmailWithSendGrid(to, subject, htmlContent string) error {
	from := mail.NewEmail("My App", "noreply@example.com")
	toEmail := mail.NewEmail("", to)
	message := mail.NewSingleEmail(from, subject, toEmail, "", htmlContent)

	client := sendgrid.NewSendClient(os.Getenv("SENDGRID_API_KEY"))
	_, err := client.Send(message)
	return err
}

SendResetPassword: func(ctx context.Context, user *user.User, url string, token string) error {
	subject := "Reset Your Password"
	htmlContent := fmt.Sprintf(`
		<h1>Reset Your Password</h1>
		<p>Click the link below to reset your password:</p>
		<a href="%s">Reset Password</a>
		<p>This link will expire in 1 hour.</p>
	`, url)

	return sendEmailWithSendGrid(user.Email, subject, htmlContent)
}
```

## Password Policies

Configure password requirements:

```go
&gobetterauthdomain.EmailPasswordConfig{
	MinPasswordLength: 12,
	MaxPasswordLength: 128,
	// Add custom validation in hooks if needed
}
```

## Custom Password Hashing

Use custom password hashing (bcrypt example):

```go
import "golang.org/x/crypto/bcrypt"

&gobetterauthdomain.EmailPasswordConfig{
	Password: &gobetterauthdomain.PasswordConfig{
		Hash: func(password string) (string, error) {
			hashed, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)
			if err != nil {
				return "", err
			}
			return string(hashed), nil
		},
		Verify: func(password, hash string) bool {
			err := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password))
			return err == nil
		},
	},
}
```

## User Registration Flow

1. User submits email and password
2. Account is created (unverified)
3. Verification email is sent
4. User clicks verification link
5. Account is marked as verified
6. User can sign in

## Password Reset Flow

1. User requests password reset
2. Reset email is sent with secure link
3. User clicks link and sets new password
4. Old password is changed to the new one
5. User can sign in with new password
