---
title: Google
description: Guide on how to set up Google authentication using GoBetterAuth.
---

import { Step, Steps } from "fumadocs-ui/components/steps";

<Steps>
<Step>

### Obtain Google credentials

1. Go to the [Google Cloud Console](https://console.cloud.google.com/).
1. Create a new project or select an existing one.
1. Search for "APIs & Services", then go to "Credentials" in the left menu, click "Create Credentials" > "OAuth client ID".
1. Choose "Web application", give it a name.
1. Add authorized redirect URIs:
   ```bash
   # Assuming base path is /api/auth
   http://localhost:8080/api/auth/oauth2/callback/google
   ```
   For production, replace localhost with the base URL of your GoBetterAuth server (e.g. `https://api.yourdomain.com`).
1. Note the Client ID and Client Secret.

</Step>

<Step>

### Configure the provider

#### Standalone Mode

Add the following to your `config.toml`:

```toml
# SECURITY NOTE: It is recommended to set the 'client_secret' for each of these via their
# respective environment variables as shown in the .env.example file rather than hardcoding it here.
[plugins.oauth2.providers.google]
enabled = true
client_id = "your-client-id"
client_secret = "your-client-secret"
redirect_url = "http://localhost:8080/auth/oauth2/callback/google"
scopes = []
```

#### Library Mode

```go
import (
  "os"
  "fmt"

  gobetterauth "github.com/GoBetterAuth/go-better-auth/v2"
  gobetterauthconfig "github.com/GoBetterAuth/go-better-auth/v2/config"
  gobetterauthmodels "github.com/GoBetterAuth/go-better-auth/v2/models"
  oauth2plugin "github.com/GoBetterAuth/go-better-auth/v2/plugins/oauth2"
  oauth2plugintypes "github.com/GoBetterAuth/go-better-auth/v2/plugins/oauth2/types"
)

func main() {
  config := gobetterauthconfig.NewConfig(
    gobetterauthconfig.WithSecurity(gobetterauthmodels.SecurityConfig{
      // Make sure to configure CORS and Trusted Origins appropriately
      TrustedOrigins: []string{"your frontend origin"},
      CORS: gobetterauthmodels.CORSConfig{
        AllowCredentials: true,
        AllowedOrigins:   []string{"your frontend origin"},
      },
    }),
  )
  auth := gobetterauth.New(&gobetterauth.AuthConfig{
    Config:  config,
    Plugins: [
      oauth2plugin.New(oauth2plugintypes.OAuth2PluginConfig{
        Enabled: true,
        Providers: map[string]oauth2plugintypes.ProviderConfig{
          "google": {
            Enabled:      true,
            ClientID:     os.Getenv(gobetterauthenv.EnvGoogleClientID),
            ClientSecret: os.Getenv(gobetterauthenv.EnvGoogleClientSecret),
            RedirectURL:  fmt.Sprintf("%s%s/oauth2/callback/google", config.BaseURL, config.BasePath),
          },
        },
      }),
    ],
  })
}
```

</Step>

<Step>

### Test the integration

1. Start your GoBetterAuth server.
1. In your webapp, create a button when clicked on, it navigates the user to:
   ```bash
   # (replace localhost with your GoBetterAuth server URL in production).
   http://localhost:8080/auth/oauth2/authorize/google?redirect_to=<YOUR_REDIRECT_URL>
   ```
1. You should be redirected to Google's authorization page. After authorizing, you will be redirected back to your application.

</Step>

</Steps>
